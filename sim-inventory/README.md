# Exploratory code for understanding the eSIM protocols

Based on information from
https://www.gsma.com/newsroom/wp-content/uploads/SGP.22-v2.0.pdf

... Can the JSON files be interpreted as swagger spec, and be
converted into a server/client implementation?  If so can we use it to
flesh out the interaction between the BSS and the SM-DP+?

Use json schema files (stored in the resources directory of the
source code) to verify that the input / output is conformant to the
GSMA spec.  Use jackson's ordinary methods for handling incoming
requests and replies.


TODO
---


* Think this through: Would it make sense to have emulators for
  the HSS and SM-DP+es we will integrate to, just to see that the 
  system is capable of connecting to them using the appropriate
  set of certificates etc.?

* Follow through on https://rohannagar.github.io/2018-04-11/dropwizard-on-kubernetes

* docker build -t ostelco/simadmin . 
  ... to build a new version of the simadmin thingy that is
  also reachable by kubernetes locally.

* Re-enable json schema validation on  everything, fixing the broken 
  schemas in the process.

* Optimize data structures to make it nicer. E.g. by aoviding multiple empty classes

* Make some refactoring in the data structures. 

* Use the generated openapi spec to generate clients.

* Add  and test two-way SSL authentication.

* Make test-runs of some typical client/SM-DP+ interactions,
  possibly logging them using plant uml autogenerated
  diagrams.

* Connect to proper SM-DP+, watch everything explode
  ... observe fix repeat until it's working.

* Integrate into a proper workflow for subscriber signup,
  possibly involving generation of QR-codes :-)

* Figure out how to integrate with prime, possibly making the whole thing
  a part of prime.

* Figure out how to expose endpoints using google cloud endpoints, and
  preserving authentication for incoming ES2+ callbacks.



How to start the es2plus application
---

1. Run `mvn clean install` to build your application
1. Start application with `java -jar target/esim-1.0-SNAPSHOT.jar server config.yml`
1. To check that your application is running enter url `http://localhost:8080`

Health Check
---

To see your applications health enter url `http://localhost:8081/healthcheck`

