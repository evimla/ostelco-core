# Exploratory code for understanding the eSIM protocols

Based on information from
https://www.gsma.com/newsroom/wp-content/uploads/SGP.22-v2.0.pdf

... Can the JSON files be interpreted as swagger spec, and be
converted into a server/client implementation?  If so can we use it to
flesh out the interaction between the BSS and the SM-DP+?

Use json schema files (stored in the resources directory of the
source code) to verify that the input / output is conformant to the
GSMA spec.  Use jackson's ordinary methods for handling incoming
requests and replies.


TODO
---

* Verify that the protocol is actually sane (don't have _any_ examples
  of ES2+ interactions that can be used to check assumptions made
  during development.

* Introduce exception interceptors that catches exceptions 
  generated by the web resource, but encapsulates them in the
  ES2+-conformant JSON that the resource is supposed to produce.

* Use the generated openapi spec to generate clients.

* Test two-way SSL authentication.

* Make test-runs of some typical client/SM-DP+ interactions,
  possibly logging them using plant uml autogenerated
  diagrams.

* Connect to proper SM-DP+, watch everything explode
  ... observe fix repeat until it's working.

* Integrate into a proper workflow for subscriber signup,
  possibly involving generation of QR-codes :-)


TODO
---

1. Make all the rudimentary tests work, _without_ JSON schemas to match
1. Optimize data structures to make it nicer. E.g. by aoviding multiple empty classes
1. and also develop the json schemas for both requests and responses
1. Make some recactoring in the data structure. As it is today it is simply a mess.   
1. See if it's possible to find an example of a valid SM-DP2 interaction somewhere
